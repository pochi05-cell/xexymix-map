<!DOCTYPE html>
<html lang="ko">
<head>
Â  Â  <meta charset="UTF-8">
Â  Â  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
Â  Â  <title>ì ì‹œë¯¹ìŠ¤ ì¬ê³ ì§€ë„ - ì „ì²´ ë³µêµ¬ ì™„ê²°íŒ</title>
Â  Â  <style>
Â  Â  Â  Â  :root { --yellow: #ffdb6d; --brown: #d9d2ae; --blue: #cfd8dc; --accent: #4CAF50; --highlight: #ff4d4d; }
Â  Â  Â  Â  body { font-family: -apple-system, sans-serif; background: #333; margin: 0; display: flex; flex-direction: column; align-items: center; }
Â  Â  Â  Â Â 
Â  Â  Â  Â  /* UI ë° í—¤ë” */
Â  Â  Â  Â  .global-header { width: 360px; background: white; display: flex; gap: 8px; padding: 10px; border-radius: 0 0 15px 15px; position: sticky; top: 0; z-index: 1000; box-sizing: border-box; }
Â  Â  Â  Â  #searchInput { flex: 1; padding: 10px; border: 1px solid #ddd; border-radius: 8px; font-size: 14px; }
Â  Â  Â  Â  .btn { width: 42px; height: 42px; border: none; border-radius: 8px; background: #f0f0f0; font-size: 20px; cursor: pointer; display: flex; align-items: center; justify-content: center; flex-shrink: 0; }
Â  Â  Â  Â  .btn.active { background: var(--highlight); color: white; }
Â  Â  Â  Â  #backupBtn { display: none; background: #444; color: white; }

Â  Â  Â  Â  /* ì§€ë„ ë° ë°•ìŠ¤ ê¸°ë³¸ */
Â  Â  Â  Â  .map-container { background: white; width: 360px; height: 740px; position: relative; border-radius: 15px; margin: 10px 0; overflow: hidden; box-shadow: 0 4px 10px rgba(0,0,0,0.3); }
Â  Â  Â  Â  .area-label { background: #eee; padding: 12px; text-align: center; font-weight: bold; }
Â  Â  Â  Â  .box { position: absolute; border: 1.5px solid #333; display: flex; align-items: center; justify-content: center; font-size: 10px; font-weight: bold; cursor: pointer; border-radius: 2px; box-sizing: border-box; }
Â  Â  Â  Â Â 
Â  Â  Â  Â  /* ìƒ‰ìƒ í´ë˜ìŠ¤ */
Â  Â  Â  Â  .yellow { background-color: var(--yellow) !important; }
Â  Â  Â  Â  .brown { background-color: var(--brown) !important; }
Â  Â  Â  Â  .blue { background-color: var(--blue) !important; }

Â  Â  Â  Â  /* ì•„ì¼ëœë“œ íŠ¹ìˆ˜ ì„¤ì • */
Â  Â  Â  Â  .island { transform: rotate(-45deg); width: 68px; height: 68px; }
Â  Â  Â  Â  #Y3 { z-index: 10; }
Â  Â  Â  Â  #Y4 { z-index: 10; }
Â  Â  Â  Â  #Y3-4 { width: 90px !important; height: 90px !important; z-index: 100; font-size: 13px; box-shadow: 0 0 10px rgba(0,0,0,0.2); }
Â  Â  Â  Â  .island-sq { transform: rotate(-45deg); width: 45px !important; height: 45px !important; z-index: 50; }

Â  Â  Â  Â  /* 2x2 ê·¸ë¦¬ë“œ ë ˆì´ì•„ì›ƒ */
Â  Â  Â  Â  .grid-container { display: grid; grid-template-columns: 1fr 1fr; grid-template-rows: 1fr 1fr; gap: 8px; margin-top: 10px; }
Â  Â  Â  Â  .grid-item { background: #f9f9f9; padding: 8px; border-radius: 8px; border: 1px solid #eee; }
Â  Â  Â  Â  .grid-item b { display: block; font-size: 11px; margin-bottom: 4px; color: var(--accent); }

Â  Â  Â  Â  .blink { animation: blink 0.6s infinite; background-color: var(--highlight) !important; color: white !important; z-index: 1100 !important; }
Â  Â  Â  Â  @keyframes blink { 50% { opacity: 0.3; } }

Â  Â  Â  Â  /* ëª¨ë‹¬ ë° ê¸°íƒ€ */
Â  Â  Â  Â  .modal { display:none; position:fixed; inset:0; background:rgba(0,0,0,0.8); z-index:3000; align-items:flex-end; justify-content:center; }
Â  Â  Â  Â  .pop-content { background:white; width:100%; max-width:400px; border-radius:20px 20px 0 0; padding: 20px; box-sizing: border-box; }
Â  Â  Â  Â  .layer-row { display: flex; flex-direction: column; gap: 5px; margin-bottom: 12px; background: #f9f9f9; padding: 10px; border-radius: 8px; border: 1px solid #eee; cursor: pointer; }
Â  Â  Â  Â  textarea { width: 100%; height: 50px; border: 1px solid #ddd; border-radius: 5px; resize: none; padding: 8px; font-size: 14px; box-sizing: border-box; }
Â  Â  </style>
</head>
<body>

<div class="global-header">
Â  Â  <button class="btn">ğŸ“‹</button>
Â  Â  <input type="text" id="searchInput" placeholder="ê²€ìƒ‰..." onkeyup="search(this.value)">
Â  Â  <button id="backupBtn" class="btn" onclick="openBackup()">ğŸ’¾</button>
Â  Â  <button id="editBtn" class="btn" onclick="toggleEdit()">âœï¸</button>
</div>

<div class="main-wrapper">
Â  Â  <div class="map-container" id="shopMap"><div class="area-label">&lt;ë§¤ì¥&gt;</div></div>
Â  Â  <div class="map-container" id="stockMap" style="height: 400px;"><div class="area-label">&lt;ì°½ê³ &gt;</div></div>
</div>

<div id="overlay" class="modal"><div class="pop-content"><h3 id="popTitle"></h3><div id="popLayers"></div><button onclick="save()" style="width:100%; padding:15px; background:var(--accent); color:white; border:none; border-radius:10px; margin-top:15px; font-weight:bold;">ì €ì¥</button><button onclick="closePop()" style="width:100%; padding:10px; background:#eee; border:none; border-radius:10px; margin-top:8px;">ë‹«ê¸°</button></div></div>

<script>
Â  Â  // ëª¨ë“  ë§¤ì¥ ë°•ìŠ¤ ë°ì´í„° (ëˆ„ë½ ì—†ì´ ì „ì²´ ë³µêµ¬)
Â  Â  const shopBoxes = [
Â  Â  Â  Â  {id:'Y1', c:'yellow', t:70, l:60, w:90, h:35, f:2}, {id:'Y2', c:'yellow', t:70, r:30, w:90, h:35, f:2},
Â  Â  Â  Â Â 
Â  Â  Â  Â  // ì•„ì¼ëœë“œ ê·¸ë£¹ (Y3-4 ì •ì‚¬ê°í˜•í™” ë° ì…ì²´ ë°°ì¹˜)
Â  Â  Â  Â  {id:'Y3', c:'blue island', t:135, l:125, f:1},
Â  Â  Â  Â  {id:'Y3-4', c:'blue island', t:175, l:158, f:4}, // ê·¸ë¦¬ë“œ 4ì¹¸
Â  Â  Â  Â  {id:'Y4', c:'blue island', t:238, l:218, f:1},
Â  Â  Â  Â  {id:'Br1', c:'brown island-sq', t:210, l:95, f:4},
Â  Â  Â  Â  {id:'Br2', c:'brown island-sq', t:255, l:140, f:4},

Â  Â  Â  Â  // ì¸¡ë©´ íŒŒë€ ë°•ìŠ¤ ì‹œë¦¬ì¦ˆ
Â  Â  Â  Â  {id:'B1', c:'blue', t:130, l:25, w:38, h:55, f:1}, {id:'B2', c:'blue', t:195, l:25, w:38, h:55, f:1},
Â  Â  Â  Â  {id:'B3', c:'blue', t:260, l:25, w:38, h:55, f:1}, {id:'B4', c:'blue', t:325, l:25, w:38, h:55, f:1},
Â  Â  Â  Â  {id:'B5', c:'blue', t:130, r:25, w:38, h:55, f:1}, {id:'B6', c:'blue', t:195, r:25, w:38, h:55, f:1},
Â  Â  Â  Â  {id:'B7', c:'blue', t:260, r:25, w:38, h:55, f:1}, {id:'B8', c:'blue', t:325, r:25, w:38, h:55, f:1},
Â  Â  Â  Â Â 
Â  Â  Â  Â  // í•˜ë‹¨ ë°•ìŠ¤ ì‹œë¦¬ì¦ˆ
Â  Â  Â  Â  {id:'B9', c:'blue', t:395, l:85, w:70, h:38, f:1}, {id:'B10', c:'blue', t:395, r:85, w:70, h:38, f:1},
Â  Â  Â  Â  {id:'Y5', c:'yellow', t:450, r:25, w:38, h:70, f:4}, {id:'Y6', c:'yellow', t:450, l:220, w:38, h:70, f:4},
Â  Â  Â  Â  {id:'Br3', c:'brown', t:585, l:65, w:32, h:50, f:2}, {id:'Br4', c:'brown', t:645, l:65, w:32, h:50, f:2},
Â  Â  Â  Â  {id:'Y7', c:'yellow', t:585, r:30, w:38, h:75, f:4}, {id:'Y8', c:'yellow', t:650, l:145, w:80, h:45, f:2},
Â  Â  Â  Â  {id:'Y9', c:'yellow', t:650, l:235, w:80, h:45, f:2}
Â  Â  ];

Â  Â  // ì°½ê³  ë°•ìŠ¤ ë°ì´í„°
Â  Â  const stockBoxes = [
Â  Â  Â  Â  {id:'S1', t:70, l:10}, {id:'S2', t:70, l:78}, {id:'S3', t:70, l:146}, {id:'S4', t:70, l:214}, {id:'S5', t:70, l:282},
Â  Â  Â  Â  {id:'S6', t:140, l:15, w:55, h:90}, {id:'S7', t:140, r:15, w:55, h:90}, {id:'S8', t:240, l:75, w:55, h:90}, {id:'S9', t:305, l:135, w:85, h:45}
Â  Â  ];

Â  Â  let isEdit = false, currId = null;
Â  Â  let storage = JSON.parse(localStorage.getItem('xexy_v_final_data')) || {};

Â  Â  function init() {
Â  Â  Â  Â  createBoxes(shopBoxes, 'shopMap', false);
Â  Â  Â  Â  createBoxes(stockBoxes, 'stockMap', true);
Â  Â  }

Â  Â  function createBoxes(data, targetId, isStock) {
Â  Â  Â  Â  const target = document.getElementById(targetId);
Â  Â  Â  Â  data.forEach(b => {
Â  Â  Â  Â  Â  Â  const div = document.createElement('div');
Â  Â  Â  Â  Â  Â  div.id = b.id;
Â  Â  Â  Â  Â  Â  div.className = `box ${isStock ? 'blue' : b.c}`;
Â  Â  Â  Â  Â  Â  div.innerText = b.id;
Â  Â  Â  Â  Â  Â  let pos = `top:${b.t}px; ${b.l?'left:'+b.l+'px': (b.r?'right:'+b.r+'px':'')}; width:${b.w||60}px; height:${b.h||40}px;`;
Â  Â  Â  Â  Â  Â  div.style.cssText = pos;
Â  Â  Â  Â  Â  Â  div.onclick = () => openPop(b.id, b.f || 1);
Â  Â  Â  Â  Â  Â  target.appendChild(div);
Â  Â  Â  Â  });
Â  Â  }

Â  Â  function openPop(id, f) {
Â  Â  Â  Â  currId = id; document.getElementById('popTitle').innerText = id;
Â  Â  Â  Â  const saved = storage[id] || [];
Â  Â  Â  Â  let html = '';

Â  Â  Â  Â  if(id === 'Y3-4') {
Â  Â  Â  Â  Â  Â  html = `<div class="grid-container">`;
Â  Â  Â  Â  Â  Â  for(let i=0; i<4; i++) {
Â  Â  Â  Â  Â  Â  Â  Â  html += `<div class="grid-item"><b>ì˜ì—­ ${i+1}</b><textarea id="ipt_${i}" ${!isEdit?'readonly':''}>${saved[i]||''}</textarea></div>`;
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  html += `</div>`;
Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  for(let i=0; i<f; i++) {
Â  Â  Â  Â  Â  Â  Â  Â  html += `<div class="layer-row"><b>${i+1}F</b><textarea id="ipt_${i}" ${!isEdit?'readonly':''}>${saved[i]||''}</textarea></div>`;
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }
Â  Â  Â  Â  document.getElementById('popLayers').innerHTML = html;
Â  Â  Â  Â  document.getElementById('overlay').style.display = 'flex';
Â  Â  }

Â  Â  function toggleEdit() {
Â  Â  Â  Â  isEdit = !isEdit;
Â  Â  Â  Â  document.getElementById('editBtn').classList.toggle('active', isEdit);
Â  Â  Â  Â  document.getElementById('backupBtn').style.display = isEdit ? 'flex' : 'none';
Â  Â  }

Â  Â  function save() {
Â  Â  Â  Â  const ipts = document.querySelectorAll('#popLayers textarea');
Â  Â  Â  Â  storage[currId] = Array.from(ipts).map(i => i.value);
Â  Â  Â  Â  localStorage.setItem('xexy_v_final_data', JSON.stringify(storage));
Â  Â  Â  Â  closePop();
Â  Â  }

Â  Â  function closePop() { document.getElementById('overlay').style.display = 'none'; }
Â  Â Â 
Â  Â  function search(q) {
Â  Â  Â  Â  document.querySelectorAll('.box').forEach(b => b.classList.remove('blink'));
Â  Â  Â  Â  if(!q.trim()) return;
Â  Â  Â  Â  for(let id in storage) {
Â  Â  Â  Â  Â  Â  if(storage[id].some(v => v.toLowerCase().includes(q.toLowerCase()))) {
Â  Â  Â  Â  Â  Â  Â  Â  const target = document.getElementById(id);
Â  Â  Â  Â  Â  Â  Â  Â  if(target) target.classList.add('blink');
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }
Â  Â  }

Â  Â  init();
</script>
</body>
</html>
