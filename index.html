<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>젝시믹스 재고지도</title>
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <link rel="apple-touch-icon" href="https://cdn-icons-png.flaticon.com/512/850/850810.png">
    
    <style>
        :root { --bg: #ffffff; --yellow: #ffdb6d; --brown: #d9d2ae; --blue: #cfd8dc; --highlight: #ff4d4d; }
        body { font-family: -apple-system, sans-serif; background: #333; margin: 0; padding: env(safe-area-inset-top) 0 10px 0; display: flex; flex-direction: column; align-items: center; min-height: 100vh; overflow-y: auto; transition: background 0.3s; }
        
        body.edit-mode-active { background: #1a1a1a; }
        body.edit-mode-active .map-container { background: #e0e0e0; transition: 0.3s; }
        body.edit-mode-active .area-bar { background: #d0d0d0; }

        .global-header { width: 360px; background: white; display: flex; gap: 10px; padding: 12px; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.2); z-index: 200; box-sizing: border-box; margin-bottom: 10px; position: sticky; top: 10px; }
        #searchInput { flex: 1; padding: 10px; border: 1px solid #ddd; border-radius: 8px; font-size: 16px; outline: none; }
        .icon-btn { width: 40px; height: 40px; border: none; border-radius: 8px; background: #f0f0f0; cursor: pointer; font-size: 18px; transition: 0.2s; }
        .icon-btn.active { background: #ff4d4d; color: white; transform: scale(1.1); box-shadow: 0 0 10px rgba(255,77,77,0.5); }

        .main-wrapper { display: flex; flex-direction: column; gap: 15px; align-items: center; }
        .map-container { background: white; width: 360px; height: 750px; position: relative; border-radius: 12px; box-shadow: 0 4px 10px rgba(0,0,0,0.3); overflow: hidden; flex-shrink: 0; }

        @media (min-width: 750px) { .main-wrapper { flex-direction: row; align-items: flex-start; } .global-header { width: 735px; } }

        .area-bar { background: #f8f8f8; height: 45px; display: flex; align-items: center; justify-content: center; font-weight: bold; font-size: 16px; border-bottom: 1px solid #eee; color: #333; }
        .box { position: absolute; border: 1.5px solid #333; cursor: pointer; z-index: 10; border-radius: 2px; display: flex; align-items: center; justify-content: center; font-size: 11px; font-weight: bold; background-clip: padding-box; pointer-events: auto !important; }
        .yellow { background: var(--yellow); } .brown { background: var(--brown); } .blue { background: var(--blue); }
        .blink { animation: blinker 0.6s linear infinite; background: var(--highlight) !important; color: white !important; z-index: 100 !important; }
        @keyframes blinker { 50% { opacity: 0.3; } }

        /* --- 매장 일반 좌표 --- */
        .pos-y1 { top: 70px; left: 60px; width: 90px; height: 35px; } 
        .pos-y2 { top: 70px; right: 30px; width: 90px; height: 35px; }
        .pos-b1 { top: 130px; left: 20px; width: 35px; height: 55px; } 
        .pos-b2 { top: 195px; left: 20px; width: 35px; height: 55px; }
        .pos-b3 { top: 260px; left: 20px; width: 35px; height: 55px; } 
        .pos-b4 { top: 325px; left: 20px; width: 35px; height: 55px; }
        .pos-b5 { top: 130px; right: 25px; width: 35px; height: 55px; } 
        .pos-b6 { top: 195px; right: 25px; width: 35px; height: 55px; }
        .pos-b7 { top: 260px; right: 25px; width: 35px; height: 55px; } 
        .pos-b8 { top: 325px; right: 25px; width: 35px; height: 55px; }

        /* --- [집중 수정] 아일랜드 4개 박스 완전 밀착 정렬 --- */
        .island-y { transform: rotate(-45deg); width: 65px; height: 65px; } /* 비율을 정사각형으로 조정 */
        .island-br { transform: rotate(-45deg); width: 45px; height: 45px; }

        /* Y3-Y4 (상단 노란색 큰 정사각형 그룹) */
        .pos-y3 { top: 180px; left: 148px; } 
        .pos-y4 { top: 226px; left: 194px; } 

        /* Br1-Br2 (하단 브라운 작은 정사각형 그룹) */
        /* Y그룹의 하단 변에 Br그룹의 상단 변이 완벽히 맞닿도록 계산 */
        .pos-br1 { top: 232px; left: 122px; } 
        .pos-br2 { top: 278px; left: 168px; } 

        .pos-b9 { top: 395px; left: 85px; width: 70px; height: 38px; } 
        .pos-b10 { top: 395px; right: 85px; width: 70px; height: 38px; }
        .pos-y6 { top: 450px; left: 220px; width: 38px; height: 70px; } 
        .pos-y5 { top: 450px; right: 25px; width: 38px; height: 70px; }
        .counter-box { position: absolute; top: 535px; left: 82px; width: 200px; height: 38px; background: #eee; border-radius: 5px; display: flex; justify-content: center; align-items: center; font-size: 12px; color: #888; border: 1px solid #ccc; }
        .pos-br3 { top: 585px; left: 65px; width: 32px; height: 50px; } 
        .pos-br4 { top: 645px; left: 65px; width: 32px; height: 50px; }
        .pos-y7 { top:
